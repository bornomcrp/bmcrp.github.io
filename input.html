<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Borno State Multisectoral Crisis Recovery Project</title>
    <!-- ======= Styles ====== -->
    <link rel="stylesheet" href="assets/css/style.css">
</head>

<body>
    <!-- =============== Navigation ================ -->
    <div class="container">
        <!--<div class="navigation">
            <ul>
                <li>
                    <a href="#">
                        <span class="icon">
                            <img src="assets/imgs/AF Logo.png">
                        </span>
                        <span class="title">Menu</span>
                    </a>
                </li>

                <li>
                    <a href="dashboard.html">
                        <span class="icon">
                            <ion-icon name="home-outline"></ion-icon>
                        </span>
                        <span class="title">Dashboard</span>
                    </a>
                </li>

                <li>
                    <a href="projects.html">
                        <span class="icon">
                            <ion-icon name="list-outline"></ion-icon>
                        </span>
                        <span class="title">Projects</span>
                    </a>
                </li>

                <li>
                    <a href="finances.html">
                        <span class="icon">
                            <ion-icon name="cash-outline"></ion-icon>
                        </span>
                        <span class="title">Budget</span>
                    </a>
                </li>

                <li>
                    <a href="gis.html">
                        <span class="icon">
                            <ion-icon name="location-outline"></ion-icon>
                        </span>
                        <span class="title">Map</span>
                    </a>
                </li>
                
                <li>
                    <a href="index.html">
                        <span class="icon">
                            <ion-icon name="log-out-outline"></ion-icon>
                        </span>
                        <span class="title">Sign Out</span>
                    </a>
                </li>

            </ul>

        </div> -->

        <!-- ========================= Main ==================== -->
        <div class="main">
            <div class="topbar">
                <div class="toggle">
                    <ion-icon name="menu-outline"></ion-icon>
                </div>

                <div class="title">
                        <h4>Borno State Multisectoral Crisis Recovery Project</h4>
                        <h6>Management Information System</h6>
                    </div>

                <div class="user">
                    <img src="assets/imgs/AF Logo.png" alt="">
                </div>
            </div>

            <!-- =========== Input Cards =========  -->
            <div class="cardBox inputCardbox">
                <div class="card projinputcard">
       
                <!-- ==== Project Data Input Form ==== -->
            <div class="col-md-6"><span style="font-weight: 600;">Project Data</span>
               <form>
                   <div class="form-group"><br>
                       <input type="text" class="form-control" id="PID" placeholder="Project ID">
                     </div><br>  
               <div class="form-group">
                 <input type="text" class="form-control" id="Component" placeholder="Component">
               </div><br>
               <div class="form-group">
                 <input type="text" class="form-control" id="Sector"placeholder="Sector">
               </div><br>
               <div class="form-group">
                 <input type="text" class="form-control" id="Project_Name" placeholder="Project Name">
               </div><br>
               <div class="form-group">
                 <input type="text" class="form-control" id="Project_Description" placeholder="Project Description">
               </div><br>
               <div class="form-group">
                 <input type="text" class="form-control" id="Cost_D" placeholder="Cost (Dollar)">
               </div><br>
               <div class="form-group">
                 <input type="text" class="form-control" id="Cost_N" placeholder="Cost (Naira)">
               </div><br>
               <div class="form-group">
                 <input type="text" class="form-control" id="LGA" placeholder="LGA">
               </div><br>
               <div class="form-group">
                 <input type="text" class="form-control" id="Community" placeholder="Community">
               </div><br>
               <div class="form-group">
                 <input type="text" class="form-control" id="Beneficiaries" placeholder="Beneficiaries">
               </div><br>
               <div class="form-group">
                 <input type="text" class="form-control" id="Agency" placeholder="Implementing Agency">
               </div><br>
               <div class="form-group">
                 <input type="text" class="form-control" id="Status" placeholder="Status">
               </div><br>
               <div class="form-group">
                 <input type="text" class="form-control" id="Lat" placeholder="Latitude">
               </div><br>
               <div class="form-group">
                 <input type="text" class="form-control" id="Long" placeholder="Longitude">
               </div>
             </form>
             </div>

                </div>

                <div class="card projinputcard">
                    
                    <!-- ==== Procurement Data Input Form ==== -->
            <div class="col-md-6"><span style="font-weight: 600;">Procurement Data</span>
                <form>
                    <div class="form-group"><br>
                        <input type="text" class="form-control" id="Proc_Method" placeholder="Procurement Method">
                      </div><br>  
                <div class="form-group">
                  <input type="text" class="form-control" id="Proc_Status" placeholder="Proc Status">
                </div><br>
                <div class="form-group">
                  <input type="text" class="form-control" id="Contract_No"placeholder="Contract Number">
                </div><br>
                <div class="form-group">
                  <input type="text" class="form-control" id="Contract_Award_Date" placeholder="Contract Award Date">
                </div><br>
                <div class="form-group">
                  <input type="text" class="form-control" id="Contract_Acceptance_Date" placeholder="Contract Acceptance Date">
                </div><br>
                <div class="form-group">
                  <input type="text" class="form-control" id="Contract_Start_Date" placeholder="Contract Start Date">
                </div><br>
                <div class="form-group">
                  <input type="text" class="form-control" id="Duration" placeholder="Contract Duration">
                </div>
              </form>
              </div>

                </div>

                <div class="card projinputcard">
       
                    <!-- ==== Safeguards Data Input Form ==== -->
                <div class="col-md-6"><span style="font-weight: 600;">Safeguards Data</span>
                   <form>
                       <div class="form-group"><br>
                           <input type="text" class="form-control" id="Screening_Date" placeholder="Screening Date">
                         </div><br>  
                   <div class="form-group">
                     <input type="text" class="form-control" id="Assessment_Category" placeholder="Assessment Category">
                   </div><br>
                   <div class="form-group">
                     <input type="text" class="form-control" id="OPs_Triggered"placeholder="WB OPs Triggered">
                   </div><br>
                   <div class="form-group">
                     <input type="text" class="form-control" id="SSI" placeholder="Site Specific Instrument">
                   </div><br>
                   <div class="form-group">
                     <input type="text" class="form-control" id="Date_of_Disclosure" placeholder="Date of Disclosure">
                   </div>
                 </form>
                 </div>
    
                    </div>
    
                    <div class="card projinputcard">
                        
                        <!-- ==== Progress Data Input Form ==== -->
                <div class="col-md-6"><span style="font-weight: 600;">Progress Data</span>
                    <form>
                   <div class="form-group"><br>
                     <input type="text" class="form-control" id="Physical_Progress" placeholder="Physical Progress">
                   </div><br>
                   <div class="form-group">
                     <input type="text" class="form-control" id="Financial_Progress" placeholder="Financial Progress">
                   </div><br>
                    <div class="form-group">
                    <input type="text" class="form-control" id="Expected_Date_of_Completion" placeholder="Expected Date of Completion ">
                    </div><br>  
                    <div class="form-group">
                    <input type="text" class="form-control" id="Actual_Date_of_Completion" placeholder="Actual Date of Completion ">
                    </div>
                  </form>
                  </div>
    
                    </div>

            </div>

            <br><br>
            <button type="submit" id="submit" class="btn">Submit</button>
            
        </div>
    </div>

    <!-- ====== ionicons ======= -->
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
</body>

</html>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>

<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
  import { getDatabase, set, ref ,push, child, onValue} from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";

  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyC6DSa956w7KaxfcV0837lzllZQJW0Tazo",
    authDomain: "mcrpmis.firebaseapp.com",
    databaseURL: "https://mcrpmis-default-rtdb.firebaseio.com",
    projectId: "mcrpmis",
    storageBucket: "mcrpmis.appspot.com",
    messagingSenderId: "400602189174",
    appId: "1:400602189174:web:ffa531c1863b27ad5b7e57",
    measurementId: "G-XVKK1CFXS2"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  
  // Get a reference to the database service
  const database = getDatabase(app);

  // read data
  //getData.addEventListener('click',(e) => {

    $('#dataTbl td').remove();
    var rowNum = 0; 
    const dbRef = ref(database, 'PersonDB/');

    onValue(dbRef, (snapshot) => {
      snapshot.forEach((childSnapshot) => {
      const childKey = childSnapshot.key;
      const childData = childSnapshot.val();
      // ...
      rowNum += 1; 
      var row = "<tr><td>" + rowNum + "</td><td>" + childData.ID + "</td><td>" + childData.Name + "</td><td>" + childData.Name + "</td></tr>"

      $(row).appendTo('#dataTbl');
      
      });
    }, {
       onlyOnce: true
    });

  //});

  // write data
  submit.addEventListener('click',(e) => {

    var pid = document.getElementById('PID').value; 
    var Component = document.getElementById('Component').value;  
    var Sector = document.getElementById('Sector').value;  
    var Project_Name = document.getElementById('Project_Name').value;
    var Project_Description = document.getElementById('Project_Description').value;  
    var Cost_D = document.getElementById('Cost_D').value;  
    var Cost_N = document.getElementById('Cost_N').value; 
    var LGA = document.getElementById('LGA').value;
    var Community = document.getElementById('Community').value;
    var Beneficiaries = document.getElementById('Beneficiaries').value;
    var Agency = document.getElementById('Agency').value;
    var Status = document.getElementById('Status').value;  
    var Lat = document.getElementById('Lat').value;
    var Long = document.getElementById('Long').value;

    var Proc_Method = document.getElementById('Proc_Method').value;
    var Proc_Status = document.getElementById('Proc_Status').value;
    var Contract_No = document.getElementById('Contract_No').value;
    var Contract_Award_Date = document.getElementById('Contract_Award_Date').value;
    var Contract_Acceptance_Date = document.getElementById('Contract_Acceptance_Date').value;
    var Contract_Start_Date = document.getElementById('Contract_Start_Date').value;
    var Duration = document.getElementById('Duration').value;

    var Screening_Date = document.getElementById('Screening_Date').value;
    var Assessment_Category = document.getElementById('Assessment_Category').value;
    var OPs_Triggered = document.getElementById('OPs_Triggered').value;
    var SSI = document.getElementById('SSI').value;
    var Date_of_Disclosure = document.getElementById('Date_of_Disclosure').value;

    var Physical_Progress = document.getElementById('Physical_Progress').value;
    var Financial_Progress = document.getElementById('Financial_Progress').value;
    var Expected_Date_of_Completion = document.getElementById('Expected_Date_of_Completion').value;
    var Actual_Date_of_Completion = document.getElementById('Actual_Date_of_Completion').value;

    if(pid==""){
      alert('not saved, please enter a valid Project ID');
    }else{
      set(ref(database, 'MMCJEREProjects/' + pid), {
    
    Component: Component,
    Sector: Sector,
    ProjectName : Project_Name,
    Project_Description: Project_Description,
    Cost_D: Cost_D,
    Cost_N: Cost_N,
    LGA: LGA,
    Community: Community,
    Beneficiaries: Beneficiaries,
    Agency: Agency,
    Status: Status,
    Lat: Lat,
    Long: Long,

    Proc_Method: Proc_Method,
    Proc_Status: Proc_Status,
    Contract_No: Contract_No,
    Contract_Award_Date: Contract_Award_Date,
    Contract_Acceptance_Date: Contract_Acceptance_Date,
    Contract_Start_Date: Contract_Start_Date,
    Duration: Duration,

    Screening_Date: Screening_Date,
    Assessment_Category: Assessment_Category,
    OPs_Triggered: OPs_Triggered,
    SSI: SSI,
    Date_of_Disclosure: Date_of_Disclosure,

    Physical_Progress: Physical_Progress,
    Financial_Progress: Financial_Progress,
    Expected_Date_of_Completion: Expected_Date_of_Completion,
    Actual_Date_of_Completion: Actual_Date_of_Completion

   });
   alert('saved');
    }
   
  });
</script>